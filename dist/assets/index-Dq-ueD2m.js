var H=Object.defineProperty;var M=(e,t,i)=>t in e?H(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i;var h=(e,t,i)=>(M(e,typeof t!="symbol"?t+"":t,i),i);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))r(l);new MutationObserver(l=>{for(const o of l)if(o.type==="childList")for(const S of o.addedNodes)S.tagName==="LINK"&&S.rel==="modulepreload"&&r(S)}).observe(document,{childList:!0,subtree:!0});function i(l){const o={};return l.integrity&&(o.integrity=l.integrity),l.referrerPolicy&&(o.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?o.credentials="include":l.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(l){if(l.ep)return;l.ep=!0;const o=i(l);fetch(l.href,o)}})();function n(e,t,i){return t=t/100,i==="x"?t*e.width:t*e.height}function c(e,t){return e+Math.round(Math.random()*(t-e))}class b{constructor(t,i){h(this,"speedDelta",40);h(this,"dx",Math.random()>.5?-this.speedDelta:this.speedDelta);h(this,"dy",c(-this.speedDelta,this.speedDelta));h(this,"x");h(this,"y");this.width=t,this.height=i,this.x=50-this.width/2,this.y=50-this.height/2}update(t){this.x+=this.dx*t,this.y+=this.dy*t}reset(){this.dx=Math.random()>.5?-this.speedDelta:this.speedDelta,this.dy=c(-this.speedDelta,this.speedDelta),this.x=50-this.width/2,this.y=50-this.height/2}collides(t){return!(this.x>t.x+t.width||this.x+this.width<t.x||this.y>t.y+t.height||this.y+this.height<t.y)}render(t){const i=n(t.canvas,this.x,"x"),r=n(t.canvas,this.y,"y"),l=n(t.canvas,this.width,"x"),o=n(t.canvas,this.height,"y");t.fillStyle="white",t.fillRect(i,r,l,o)}}class E{constructor(t,i,r,l){h(this,"dy",0);this.x=t,this.y=i,this.width=r,this.height=l}update(t){this.dy>0?this.y=Math.min(this.y+this.dy*t,100-this.height-1):this.y=Math.max(this.y+this.dy*t,1)}render(t){const i=n(t.canvas,this.x,"x"),r=n(t.canvas,this.y,"y"),l=n(t.canvas,this.width,"x"),o=n(t.canvas,this.height,"y");t.fillStyle="white",t.fillRect(i,r,l,o)}}function F(e){const t={};function i(r){e.includes(r.key)&&(t[r.key]=r.type==="keydown")}return window.addEventListener("keydown",i),window.addEventListener("keyup",i),t.unregister=function(){window.removeEventListener("keydown",i),window.removeEventListener("keyup",i)},t}function O(e,t){const i=n(e,t[0],"x"),r=n(e,t[1],"y");return[i,r]}function x(e){return e[0].toUpperCase()+e.slice(1).toLowerCase()}function C(e){let t=null;function i(r){if(t!==null){const l=Math.min(100,r-t)/1e3;t=r,e(l)&&requestAnimationFrame(i)}else t=r,requestAnimationFrame(i)}requestAnimationFrame(i)}const p=80,A=16/9;let d="start";const g=F(["ArrowUp","ArrowDown","w","s"]);let v=0,m=0,P=c(1,2)==1?"left":"right",D=null;const L=1.3,k=L*A,s=new b(L,k),w=1.5,a=new E(1,10,w,w*6),f=new E(100-w-1,62,w,w*6),y={score:new Audio("/pong/dist/sounds/score.wav"),paddleHit:new Audio("/pong/dist/sounds/paddle_hit.wav"),wallHit:new Audio("/pong/dist/sounds/wall_hit.wav")};y.score.volume=.4;window.addEventListener("keydown",e=>{e.key=="Enter"&&(d=="start"?d="serve":d=="serve"?(s.dx=P=="left"?s.speedDelta:-s.speedDelta,d="play"):d=="done"&&(v=0,m=0,d="serve"))});function q(e){g.ArrowDown?f.dy=p:g.ArrowUp?f.dy=-p:f.dy=0,g.w?a.dy=-p:g.s?a.dy=p:a.dy=0,a.update(e),f.update(e),d=="play"&&(s.update(e),s.collides(a)&&(s.x=a.x+a.width,s.dx=-s.dx*1.03,s.dy>0?s.dy=c(10,30):s.dy=-c(10,30),y.paddleHit.play()),s.collides(f)&&(s.x=f.x-s.width,s.dx=-s.dx*1.03,s.dy>0?s.dy=c(10,30):s.dy=-c(10,30),y.paddleHit.play()),s.y<=0&&(s.dy=-s.dy,s.y=0,y.wallHit.play()),s.y>=100-s.height&&(s.dy=-s.dy,s.y=100-s.height,y.wallHit.play()),s.x>=100?(y.score.play(),s.reset(),v++,P="right",d="serve",v==10&&(d="done",D="left")):s.x+s.width<0&&(y.score.play(),s.reset(),m++,P="left",d="serve",m==10&&(d="done",D="right")))}function u(e,t){return`${n(e,t,"x")}px 'VT323', monospace`}function R(e){const t=e.canvas,i=n(t,30,"y"),r=10;e.fillStyle="white",e.font=`${n(t,8,"x")}px 'VT323', monospace`,e.textAlign="end",e.fillText(String(v),n(t,50-r/2,"x"),i),e.textAlign="start",e.fillText(String(m),n(t,50+r/2,"x"),i)}function W(e,t){const[i,r]=O(e.canvas,[5,1]);e.fillStyle="rgb(0, 255, 0)",e.textAlign="start",e.textBaseline="top",e.font=u(e.canvas,3),e.fillText(`FPS ${Math.round(1/t)}`,i,r)}function $(e,t){const{canvas:i}=e;e.clearRect(0,0,i.width,i.height),e.fillStyle="rgb(40 45 52)",e.fillRect(0,0,i.width,i.height),e.textAlign="center",e.fillStyle="white",d=="start"&&(e.font=u(e.canvas,5),e.fillText("Welcome to Pong!",n(i,50,"x"),n(i,10,"y")),e.font=u(e.canvas,2.5),e.fillText("Press Enter to start",n(i,50,"x"),n(i,18.5,"y"))),d=="serve"&&(e.font=u(e.canvas,4),e.fillText(`${x(P)} player's serve!`,n(i,50,"x"),n(i,11,"y")),e.font=u(e.canvas,2.5),e.fillText("Press Enter to serve",n(i,50,"x"),n(i,18.5,"y"))),d=="done"&&(e.font=u(e.canvas,6),e.fillText(`${x(D)} player wins!`,n(i,50,"x"),n(i,5,"y")),e.font=u(e.canvas,2.5),e.fillText("Press Enter to restart!",n(i,50,"x"),n(i,16,"y"))),R(e),W(e,t),a.render(e),f.render(e),s.render(e)}function T(e){let t=innerHeight*A;t>innerWidth?(t=innerWidth,e.width=t,e.height=t/A):(e.width=t,e.height=innerHeight)}function z(){const e=document.createElement("canvas");document.querySelector("#app").appendChild(e);const t=e.getContext("2d");T(e),window.addEventListener("resize",()=>{T(e)}),C(i=>(q(i),$(t,i),!0))}z();
